<!DOCTYPE html>
<html>
<head>
    <title>
        Hangman!
    </title>
</head>
<body>
    <script type="text/javascript">

        function newGame(){
            var newgame = confirm("ready to start a game?");        //Checks if the user is ready to start the game.

            if (newgame) {
                var randomWord = Math.floor(Math.random() * words.length);               
                var currentWord = (words[randomWord]).split("");    //Generates a random word and splits it into an array.
                
                for (var i = 0; i < currentWord.length; i++) {      //Stores spaces that correspond to the hangman word in a variable called wordHolder.
                    wordHolder.push("_ ");
                    };
                document.write(wordHolder);

                userGuess(currentWord);
            }  

        }; 

        function userGuess(word){
            var currentGuess = prompt("Guess a letter!");       //Prompts the user to guess a letter.

            if (inArray(currentGuess,alphabet)) {               //Makes sure the input was a letter in the alphabet.
                
                var index = alphabet.indexOf(currentGuess);     
                alphabet.splice(index, 1);                      //Removes guessed letter from the alphabet array for comparative measures.

                checkWord(currentGuess, word);
            } else {
            document.write("Please pick a letter!");
            userGuess(word);
            }
        };        

        function inArray(value,array) {                      //This function checks if a value is in an array, returns true or false
              for(var i=0;i<array.length;i++) {
                if(array[i]===value){
                    return true;
                }
            }
            return false;
        };


        function checkWord(guess, word){                    //This function checks if the guessed letter is in the active hangman word.
            word.forEach(function(value,index) {
                if (value == guess) {
                    wordHolder[index] = guess;              //This replaces the corresponding space in wordHolder with the correctly guessed letter.
                }
            })

                if (word.indexOf(guess) == -1) {            //This subtracts a chance if the letter is not in the active hangman word.
                    chancesLeft--;
                    document.write(chancesLeft);
                    gameOver();
                }

            document.write(wordHolder);

            userGuess(word);
        };

        function gameOver() {
            if (chancesLeft <= 0) {
                alert("Game Over! You suck.")
                loses++;
                alphabet = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
                wordHolder = [];
                chancesLeft = 13;

                newGame();
            }
        };



        var words = ["banana", "apple", "orange"];
        var alphabet = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
        var wordHolder = [];
        var chancesLeft = 13;
        var wins= 0;
        var loses = 0

        newGame();

    </script>
</body>
</html>